{"filter":false,"title":"StatusView.js","tooltip":"/app/js/views/status/StatusView.js","undoManager":{"mark":12,"position":12,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["﻿"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":8},"end":{"row":1,"column":9},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":5},"end":{"row":1,"column":6},"action":"remove","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":4},"end":{"row":1,"column":5},"action":"remove","lines":["取"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":3},"end":{"row":1,"column":4},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":2},"end":{"row":1,"column":3},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":1},"end":{"row":1,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":8},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":64,"column":0},"action":"remove","lines":["define([","  'models/manage/DeliveryModel',","  'text!templates/status/statusTemplate.html'","], function (DeliveryModel, statusTemplate) {","","    var StatusView = Parse.View.extend({","        el: $(\"#page\"),","","        template: _.template(statusTemplate),","","        initialize: function () {","            _.bindAll(this, 'render');","        },","","        render: function () {","            var self = this;","            this.deliveryDetails = new DeliveryModel();","            $('.menu li').removeClass('active');","            $('.menu li a[href=\"#\"]').parent().addClass('active');","\t    ","            this.$el.html(this.template());","","\t    var current = new Date();","\t    var currentHour = current.getHours();","            //Delivery man starts working from 11:00-14:00, otherwise is on rest.","\t    if(currentHour <= 10 || currentHour >= 14) {","\t    ","\t            $(\"#status1\").text(\"Zzzzz...\");","\t            $(\"#status2\").text(\"Zzzzz...\");","               ","\t    } else {","            \tvar lowerDate = new Date();","            \tlowerDate.setHours(11, 0, 0, 0);","            \tvar upperDate = new Date();","            \tupperDate.setHours(13, 0, 0, 0);","","           \tvar statusQuery = new Parse.Query(DeliveryModel);","            \tstatusQuery.greaterThan(\"createdAt\", lowerDate);","            \tstatusQuery.lessThan(\"createdAt\", upperDate);","            \tstatusQuery.find({","                success: function (results) {","                    _.each(results, function (result) {","                        if (result.get(\"address\") == \"Regents Drive Parking Garage\") {","                            $(\"#status1\").text(\"我已到达!\");","                            $(\"#status1\").addClass(\"red\");","                        }","                        if (result.get(\"address\") == \"Van Munching\") {","                            $(\"#status2\").text(\"我已到达!\");","                            $(\"#status2\").addClass(\"red\");","                        }","                    \t});","                },","                error: function (error) {","                    alert(\"Error: \" + error.code + \" \" + error.message);","                \t}","            \t});","\t    }","            return this;","        }","    });","","    return StatusView;","","});",""]},{"start":{"row":0,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["define([","  'models/manage/DeliveryModel',","  'text!templates/status/statusTemplate.html'","], function (DeliveryModel, statusTemplate) {","","    var StatusView = Parse.View.extend({","        el: $(\"#page\"),","","        template: _.template(statusTemplate),","","        initialize: function () {","            _.bindAll(this, 'render');","        },","","        render: function () {","            var self = this;","            this.deliveryDetails = new DeliveryModel();","            $('.menu li').removeClass('active');","            $('.menu li a[href=\"#\"]').parent().addClass('active');","\t    ","            this.$el.html(this.template());","","\t    var current = new Date();","\t    var currentHour = current.getHours();","            //Delivery man starts working from 11:00-14:00, otherwise is on rest.","\t    if(currentHour <= 10 || currentHour >= 14) {","\t    ","\t            $(\"#status1\").text(\"Zzzzz...\");","\t            $(\"#status2\").text(\"Zzzzz...\");","               ","\t    } else {","            \tvar lowerDate = new Date();","            \tlowerDate.setHours(11, 0, 0, 0);","            \tvar upperDate = new Date();","            \tupperDate.setHours(13, 0, 0, 0);","","           \tvar statusQuery = new Parse.Query(DeliveryModel);","            \tstatusQuery.greaterThan(\"createdAt\", lowerDate);","            \tstatusQuery.lessThan(\"createdAt\", upperDate);","            \tstatusQuery.find({","                success: function (results) {","                    _.each(results, function (result) {","                        if (result.get(\"address\") == \"Regents Drive Parking Garage\") {","                            $(\"#status1\").text(\"我已到达!\");","                            $(\"#status1\").addClass(\"red\");","                        }","                        if (result.get(\"address\") == \"McKeldin Library\") {","                            $(\"#status2\").text(\"我已到达!\");","                            $(\"#status2\").addClass(\"red\");","                        }","                    \t});","                },","                error: function (error) {","                    alert(\"Error: \" + error.code + \" \" + error.message);","                \t}","            \t});","\t    }","            return this;","        }","    });","","    return StatusView;","","});",""]}]}]]},"ace":{"folds":[],"scrolltop":688.5,"scrollleft":0,"selection":{"start":{"row":64,"column":0},"end":{"row":64,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":42,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1422843945846,"hash":"3cccbf42647c8f4490a3e111acaa8b90b0cf0c40"}